#!/bin/sh

export TASKRC="$HOME/.config/task/taskrc"

id="$(/usr/local/bin/task next 2>/dev/null | sed -n 's/^\s//; 4p' | cut -d ' ' -f 1)"
context="$(/usr/local/bin/task _get rc.context)"

[ "$context" == "home" ] && context="H"
[ "$context" == "school" ] && context="S"

text="Task ("$context"): $(/usr/local/bin/task _get "$id".description)"

if [ "${#text}" -gt 40 ]
then
    echo "$(echo "$text" | cut -c -37)"...
else
    echo "$text"
fi
